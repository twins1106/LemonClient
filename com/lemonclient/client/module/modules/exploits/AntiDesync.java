//Deobfuscated with https://github.com/SimplyProgrammer/Minecraft-Deobfuscator3000 using mappings "C:\Users\user\πŸ≈¡ »≠∏È\map"!

//Decompiled by Procyon!

package com.lemonclient.client.module.modules.exploits;

import com.lemonclient.client.module.*;
import com.lemonclient.api.event.events.*;
import me.zero.alpine.listener.*;
import java.util.function.*;
import net.minecraft.network.play.server.*;
import net.minecraft.util.*;
import net.minecraft.init.*;
import com.lemonclient.api.util.misc.*;
import net.minecraft.entity.*;
import net.minecraft.entity.item.*;
import java.util.*;

@Module.Declaration(name = "AntiDesync", category = Category.Exploits)
public class AntiDesync extends Module
{
    @EventHandler
    private final Listener<PacketEvent.Receive> listener;
    
    public AntiDesync() {
        this.listener = (Listener<PacketEvent.Receive>)new Listener(event -> {
            if (AntiDesync.mc.world == null || AntiDesync.mc.player == null || !this.isEnabled()) {
                return;
            }
            if (event.getPacket() instanceof SPacketSoundEffect) {
                final SPacketSoundEffect packet = (SPacketSoundEffect)event.getPacket();
                if (packet.getCategory() == SoundCategory.BLOCKS && packet.getSound() == SoundEvents.ENTITY_GENERIC_EXPLODE) {
                    try {
                        for (final Entity e : Wrapper.getWorld().loadedEntityList) {
                            if (e instanceof EntityEnderCrystal && e.getDistance(packet.getX(), packet.getY(), packet.getZ()) <= 6.0) {
                                e.setDead();
                            }
                        }
                    }
                    catch (Exception e2) {
                        e2.printStackTrace();
                    }
                }
            }
        }, new Predicate[0]);
    }
}
